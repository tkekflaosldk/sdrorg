(function(window,$,undefined){var module={},diff=0,d='',baseTime,config={power_ladder:{returnMinute:5,countDownDiff:(1000*60*2)+(1000*15)},power:{returnMinute:5,countDownDiff:(1000*60*2)+(1000*15)},racing:{returnMinute:5,countDownDiff:0},dari:{returnMinute:3,countDownDiff:0},ladder:{returnMinute:5,countDownDiff:0},roulette:{returnMinute:5,countDownDiff:0},speedkino:{returnMinute:5,countDownDiff:20000}};module.update=function(){d=new Date();baseTime=d.getTime()+ diff;d.setTime(baseTime);return diff;};module.get_timer=function(){var yyyy=d.getFullYear();var mm=d.getMonth()+ 1;var dd=d.getDate();var hh=d.getHours();var ii=d.getMinutes();var ss=d.getSeconds();mm=(mm<10)?"0"+ mm:mm;dd=(dd<10)?"0"+ dd:dd;hh=(hh<10)?"0"+ hh:hh;ii=(ii<10)?"0"+ ii:ii;ss=(ss<10)?"0"+ ss:ss;return{date:d,yyyy:yyyy,mm:mm,dd:dd,hh:hh,ii:ii,ss:ss};};module.get_countdown_seconds=function(game){var returnMinute=config[game].returnMinute;var countDownDiff=config[game].countDownDiff;var pass_seconds=(baseTime+ countDownDiff)%(60*returnMinute*1000);var countdown_seconds=Math.ceil(((60*returnMinute*1000)- pass_seconds)/ 1000);
countdown_seconds=(countdown_seconds>=(60*returnMinute))?0:countdown_seconds;return countdown_seconds;};module.get_round=function(game){var returnMinute=config[game].returnMinute;var countDownDiff=config[game].countDownDiff;var round=Number(((d.getHours()*3600)+(d.getMinutes()*60)+ d.getSeconds()+(countDownDiff/1000))/ (60 * returnMinute));
round=Math.floor(round)+ 1;return round;};module.get_gauge=function(game,seconds){var returnMinute=config[game].returnMinute;return seconds/(returnMinute*60)*100;};module.now_clock=function(t){return t.yyyy+"."+ t.mm+"."+ t.dd+" "+ t.hh+":"+ t.ii+":"+ t.ss;};module.convert_countdown_clock=function(seconds){var ii=Math.floor(seconds/60),ss=Math.floor(seconds%60);return ii+"분 "+ ss+"초";};module.set_diff=function(str){diff=new Date(str).getTime()- new Date().getTime()-(10*1000);};module.sync_clock=function(){$.ajax({type:"get",url:"/public/js/sync_clock.json",dataType:"json",cache:false,success:function(res,textStatus,request){var response_time=new Date(request.getResponseHeader("Date")).getTime();module.set_diff(response_time);},complete:function(){setTimeout(function(){module.sync_clock();},10000);}});};window.game_clock=module;}(window,jQuery));